{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./supabaseClient","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":106},"end":{"line":4,"column":44,"index":150}}],"key":"Fd7w8mMawcXEor1Po+CqWnKxQDc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.signUp = signUp;\n  exports.signIn = signIn;\n  exports.signOut = signOut;\n  exports.getSession = getSession;\n  exports.onAuthStateChange = onAuthStateChange;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _supabaseClient = require(_dependencyMap[1], \"./supabaseClient\");\n  // Authentication Service - Zero Knowledge Vault\n  // Supabase auth is for IDENTITY ONLY, not vault access\n  /**\n   * Sign up with email and password\n   * This creates identity only - vault setup happens separately\n   */\n  function signUp(_x, _x2) {\n    return _signUp.apply(this, arguments);\n  }\n  /**\n   * Sign in with email and password\n   */\n  function _signUp() {\n    _signUp = (0, _asyncToGenerator.default)(function* (email, password) {\n      try {\n        var _yield$supabase$auth$ = yield _supabaseClient.supabase.auth.signUp({\n            email,\n            password,\n            options: {\n              // Disable email confirmation for easier development\n              emailRedirectTo: undefined\n            }\n          }),\n          data = _yield$supabase$auth$.data,\n          error = _yield$supabase$auth$.error;\n        if (error) {\n          // Handle rate limit error with user-friendly message\n          if (error.message.includes('rate limit') || error.message.includes('Rate limit')) {\n            return {\n              success: false,\n              error: 'Too many signup attempts. Please wait a few minutes and try again.'\n            };\n          }\n          return {\n            success: false,\n            error: error.message\n          };\n        }\n        if (data.user) {\n          // Check if email confirmation is required\n          if (data.user.identities && data.user.identities.length === 0) {\n            return {\n              success: false,\n              error: 'This email is already registered. Please sign in instead.'\n            };\n          }\n          return {\n            success: true,\n            user: {\n              id: data.user.id,\n              email: data.user.email || email\n            }\n          };\n        }\n        return {\n          success: false,\n          error: 'Failed to create account'\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: error.message || 'Unknown error'\n        };\n      }\n    });\n    return _signUp.apply(this, arguments);\n  }\n  function signIn(_x3, _x4) {\n    return _signIn.apply(this, arguments);\n  }\n  /**\n   * Sign out\n   */\n  function _signIn() {\n    _signIn = (0, _asyncToGenerator.default)(function* (email, password) {\n      try {\n        var _yield$supabase$auth$2 = yield _supabaseClient.supabase.auth.signInWithPassword({\n            email,\n            password\n          }),\n          data = _yield$supabase$auth$2.data,\n          error = _yield$supabase$auth$2.error;\n        if (error) {\n          // Handle email not confirmed error\n          if (error.message.includes('Email not confirmed') || error.message.includes('email not confirmed')) {\n            return {\n              success: false,\n              error: 'Email not confirmed. Please check your email or disable email confirmation in Supabase dashboard.'\n            };\n          }\n          return {\n            success: false,\n            error: error.message\n          };\n        }\n        if (data.user) {\n          return {\n            success: true,\n            user: {\n              id: data.user.id,\n              email: data.user.email || email\n            }\n          };\n        }\n        return {\n          success: false,\n          error: 'Failed to sign in'\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: error.message || 'Unknown error'\n        };\n      }\n    });\n    return _signIn.apply(this, arguments);\n  }\n  function signOut() {\n    return _signOut.apply(this, arguments);\n  }\n  /**\n   * Get current session\n   */\n  function _signOut() {\n    _signOut = (0, _asyncToGenerator.default)(function* () {\n      yield _supabaseClient.supabase.auth.signOut();\n    });\n    return _signOut.apply(this, arguments);\n  }\n  function getSession() {\n    return _getSession.apply(this, arguments);\n  }\n  /**\n   * Listen to auth state changes\n   */\n  function _getSession() {\n    _getSession = (0, _asyncToGenerator.default)(function* () {\n      try {\n        var _yield$supabase$auth$3 = yield _supabaseClient.supabase.auth.getSession(),\n          session = _yield$supabase$auth$3.data.session;\n        if (session?.user) {\n          return {\n            id: session.user.id,\n            email: session.user.email || ''\n          };\n        }\n        return null;\n      } catch (error) {\n        return null;\n      }\n    });\n    return _getSession.apply(this, arguments);\n  }\n  function onAuthStateChange(callback) {\n    return _supabaseClient.supabase.auth.onAuthStateChange((event, session) => {\n      if (session?.user) {\n        callback({\n          id: session.user.id,\n          email: session.user.email || ''\n        });\n      } else {\n        callback(null);\n      }\n    });\n  }\n});","lineCount":185,"map":[[12,2,17,0,"exports"],[12,9,17,0],[12,10,17,0,"signUp"],[12,16,17,0],[12,19,17,0,"signUp"],[12,25,17,0],[13,2,66,0,"exports"],[13,9,66,0],[13,10,66,0,"signIn"],[13,16,66,0],[13,19,66,0,"signIn"],[13,25,66,0],[14,2,103,0,"exports"],[14,9,103,0],[14,10,103,0,"signOut"],[14,17,103,0],[14,20,103,0,"signOut"],[14,27,103,0],[15,2,110,0,"exports"],[15,9,110,0],[15,10,110,0,"getSession"],[15,20,110,0],[15,23,110,0,"getSession"],[15,33,110,0],[16,2,130,0,"exports"],[16,9,130,0],[16,10,130,0,"onAuthStateChange"],[16,27,130,0],[16,30,130,0,"onAuthStateChange"],[16,47,130,0],[17,2,141,1],[17,6,141,1,"_babelRuntimeHelpersAsyncToGenerator"],[17,42,141,1],[17,45,141,1,"require"],[17,52,141,1],[17,53,141,1,"_dependencyMap"],[17,67,141,1],[18,2,141,1],[18,6,141,1,"_asyncToGenerator"],[18,23,141,1],[18,26,141,1,"_interopDefault"],[18,41,141,1],[18,42,141,1,"_babelRuntimeHelpersAsyncToGenerator"],[18,78,141,1],[19,2,4,0],[19,6,4,0,"_supabaseClient"],[19,21,4,0],[19,24,4,0,"require"],[19,31,4,0],[19,32,4,0,"_dependencyMap"],[19,46,4,0],[20,2,1,0],[21,2,2,0],[22,2,13,0],[23,0,14,0],[24,0,15,0],[25,0,16,0],[26,2,13,0],[26,11,17,22,"signUp"],[26,17,17,28,"signUp"],[26,18,17,28,"_x"],[26,20,17,28],[26,22,17,28,"_x2"],[26,25,17,28],[27,4,17,28],[27,11,17,28,"_signUp"],[27,18,17,28],[27,19,17,28,"apply"],[27,24,17,28],[27,31,17,28,"arguments"],[27,40,17,28],[28,2,17,28],[29,2,63,0],[30,0,64,0],[31,0,65,0],[32,2,63,0],[32,11,63,0,"_signUp"],[32,19,63,0],[33,4,63,0,"_signUp"],[33,11,63,0],[33,18,63,0,"_asyncToGenerator"],[33,35,63,0],[33,36,63,0,"default"],[33,43,63,0],[33,45,17,7],[33,56,17,29,"email"],[33,61,17,42],[33,63,17,44,"password"],[33,71,17,60],[33,73,17,83],[34,6,18,2],[34,10,18,6],[35,8,19,4],[35,12,19,4,"_yield$supabase$auth$"],[35,33,19,4],[35,42,19,34,"supabase"],[35,57,19,42],[35,58,19,42,"supabase"],[35,66,19,42],[35,67,19,43,"auth"],[35,71,19,47],[35,72,19,48,"signUp"],[35,78,19,54],[35,79,19,55],[36,12,20,6,"email"],[36,17,20,11],[37,12,21,6,"password"],[37,20,21,14],[38,12,22,6,"options"],[38,19,22,13],[38,21,22,15],[39,14,23,8],[40,14,24,8,"emailRedirectTo"],[40,29,24,23],[40,31,24,25,"undefined"],[41,12,25,6],[42,10,26,4],[42,11,26,5],[42,12,26,6],[43,10,19,12,"data"],[43,14,19,16],[43,17,19,16,"_yield$supabase$auth$"],[43,38,19,16],[43,39,19,12,"data"],[43,43,19,16],[44,10,19,18,"error"],[44,15,19,23],[44,18,19,23,"_yield$supabase$auth$"],[44,39,19,23],[44,40,19,18,"error"],[44,45,19,23],[45,8,28,4],[45,12,28,8,"error"],[45,17,28,13],[45,19,28,15],[46,10,29,6],[47,10,30,6],[47,14,30,10,"error"],[47,19,30,15],[47,20,30,16,"message"],[47,27,30,23],[47,28,30,24,"includes"],[47,36,30,32],[47,37,30,33],[47,49,30,45],[47,50,30,46],[47,54,30,50,"error"],[47,59,30,55],[47,60,30,56,"message"],[47,67,30,63],[47,68,30,64,"includes"],[47,76,30,72],[47,77,30,73],[47,89,30,85],[47,90,30,86],[47,92,30,88],[48,12,31,8],[48,19,31,15],[49,14,32,10,"success"],[49,21,32,17],[49,23,32,19],[49,28,32,24],[50,14,33,10,"error"],[50,19,33,15],[50,21,33,17],[51,12,34,8],[51,13,34,9],[52,10,35,6],[53,10,36,6],[53,17,36,13],[54,12,36,15,"success"],[54,19,36,22],[54,21,36,24],[54,26,36,29],[55,12,36,31,"error"],[55,17,36,36],[55,19,36,38,"error"],[55,24,36,43],[55,25,36,44,"message"],[56,10,36,52],[56,11,36,53],[57,8,37,4],[58,8,39,4],[58,12,39,8,"data"],[58,16,39,12],[58,17,39,13,"user"],[58,21,39,17],[58,23,39,19],[59,10,40,6],[60,10,41,6],[60,14,41,10,"data"],[60,18,41,14],[60,19,41,15,"user"],[60,23,41,19],[60,24,41,20,"identities"],[60,34,41,30],[60,38,41,34,"data"],[60,42,41,38],[60,43,41,39,"user"],[60,47,41,43],[60,48,41,44,"identities"],[60,58,41,54],[60,59,41,55,"length"],[60,65,41,61],[60,70,41,66],[60,71,41,67],[60,73,41,69],[61,12,42,8],[61,19,42,15],[62,14,43,10,"success"],[62,21,43,17],[62,23,43,19],[62,28,43,24],[63,14,44,10,"error"],[63,19,44,15],[63,21,44,17],[64,12,45,8],[64,13,45,9],[65,10,46,6],[66,10,48,6],[66,17,48,13],[67,12,49,8,"success"],[67,19,49,15],[67,21,49,17],[67,25,49,21],[68,12,50,8,"user"],[68,16,50,12],[68,18,50,14],[69,14,51,10,"id"],[69,16,51,12],[69,18,51,14,"data"],[69,22,51,18],[69,23,51,19,"user"],[69,27,51,23],[69,28,51,24,"id"],[69,30,51,26],[70,14,52,10,"email"],[70,19,52,15],[70,21,52,17,"data"],[70,25,52,21],[70,26,52,22,"user"],[70,30,52,26],[70,31,52,27,"email"],[70,36,52,32],[70,40,52,36,"email"],[71,12,53,8],[72,10,54,6],[72,11,54,7],[73,8,55,4],[74,8,57,4],[74,15,57,11],[75,10,57,13,"success"],[75,17,57,20],[75,19,57,22],[75,24,57,27],[76,10,57,29,"error"],[76,15,57,34],[76,17,57,36],[77,8,57,63],[77,9,57,64],[78,6,58,2],[78,7,58,3],[78,8,58,4],[78,15,58,11,"error"],[78,20,58,21],[78,22,58,23],[79,8,59,4],[79,15,59,11],[80,10,59,13,"success"],[80,17,59,20],[80,19,59,22],[80,24,59,27],[81,10,59,29,"error"],[81,15,59,34],[81,17,59,36,"error"],[81,22,59,41],[81,23,59,42,"message"],[81,30,59,49],[81,34,59,53],[82,8,59,69],[82,9,59,70],[83,6,60,2],[84,4,61,0],[84,5,61,1],[85,4,61,1],[85,11,61,1,"_signUp"],[85,18,61,1],[85,19,61,1,"apply"],[85,24,61,1],[85,31,61,1,"arguments"],[85,40,61,1],[86,2,61,1],[87,2,61,1],[87,11,66,22,"signIn"],[87,17,66,28,"signIn"],[87,18,66,28,"_x3"],[87,21,66,28],[87,23,66,28,"_x4"],[87,26,66,28],[88,4,66,28],[88,11,66,28,"_signIn"],[88,18,66,28],[88,19,66,28,"apply"],[88,24,66,28],[88,31,66,28,"arguments"],[88,40,66,28],[89,2,66,28],[90,2,100,0],[91,0,101,0],[92,0,102,0],[93,2,100,0],[93,11,100,0,"_signIn"],[93,19,100,0],[94,4,100,0,"_signIn"],[94,11,100,0],[94,18,100,0,"_asyncToGenerator"],[94,35,100,0],[94,36,100,0,"default"],[94,43,100,0],[94,45,66,7],[94,56,66,29,"email"],[94,61,66,42],[94,63,66,44,"password"],[94,71,66,60],[94,73,66,83],[95,6,67,2],[95,10,67,6],[96,8,68,4],[96,12,68,4,"_yield$supabase$auth$2"],[96,34,68,4],[96,43,68,34,"supabase"],[96,58,68,42],[96,59,68,42,"supabase"],[96,67,68,42],[96,68,68,43,"auth"],[96,72,68,47],[96,73,68,48,"signInWithPassword"],[96,91,68,66],[96,92,68,67],[97,12,69,6,"email"],[97,17,69,11],[98,12,70,6,"password"],[99,10,71,4],[99,11,71,5],[99,12,71,6],[100,10,68,12,"data"],[100,14,68,16],[100,17,68,16,"_yield$supabase$auth$2"],[100,39,68,16],[100,40,68,12,"data"],[100,44,68,16],[101,10,68,18,"error"],[101,15,68,23],[101,18,68,23,"_yield$supabase$auth$2"],[101,40,68,23],[101,41,68,18,"error"],[101,46,68,23],[102,8,73,4],[102,12,73,8,"error"],[102,17,73,13],[102,19,73,15],[103,10,74,6],[104,10,75,6],[104,14,75,10,"error"],[104,19,75,15],[104,20,75,16,"message"],[104,27,75,23],[104,28,75,24,"includes"],[104,36,75,32],[104,37,75,33],[104,58,75,54],[104,59,75,55],[104,63,75,59,"error"],[104,68,75,64],[104,69,75,65,"message"],[104,76,75,72],[104,77,75,73,"includes"],[104,85,75,81],[104,86,75,82],[104,107,75,103],[104,108,75,104],[104,110,75,106],[105,12,76,8],[105,19,76,15],[106,14,77,10,"success"],[106,21,77,17],[106,23,77,19],[106,28,77,24],[107,14,78,10,"error"],[107,19,78,15],[107,21,78,17],[108,12,79,8],[108,13,79,9],[109,10,80,6],[110,10,81,6],[110,17,81,13],[111,12,81,15,"success"],[111,19,81,22],[111,21,81,24],[111,26,81,29],[112,12,81,31,"error"],[112,17,81,36],[112,19,81,38,"error"],[112,24,81,43],[112,25,81,44,"message"],[113,10,81,52],[113,11,81,53],[114,8,82,4],[115,8,84,4],[115,12,84,8,"data"],[115,16,84,12],[115,17,84,13,"user"],[115,21,84,17],[115,23,84,19],[116,10,85,6],[116,17,85,13],[117,12,86,8,"success"],[117,19,86,15],[117,21,86,17],[117,25,86,21],[118,12,87,8,"user"],[118,16,87,12],[118,18,87,14],[119,14,88,10,"id"],[119,16,88,12],[119,18,88,14,"data"],[119,22,88,18],[119,23,88,19,"user"],[119,27,88,23],[119,28,88,24,"id"],[119,30,88,26],[120,14,89,10,"email"],[120,19,89,15],[120,21,89,17,"data"],[120,25,89,21],[120,26,89,22,"user"],[120,30,89,26],[120,31,89,27,"email"],[120,36,89,32],[120,40,89,36,"email"],[121,12,90,8],[122,10,91,6],[122,11,91,7],[123,8,92,4],[124,8,94,4],[124,15,94,11],[125,10,94,13,"success"],[125,17,94,20],[125,19,94,22],[125,24,94,27],[126,10,94,29,"error"],[126,15,94,34],[126,17,94,36],[127,8,94,56],[127,9,94,57],[128,6,95,2],[128,7,95,3],[128,8,95,4],[128,15,95,11,"error"],[128,20,95,21],[128,22,95,23],[129,8,96,4],[129,15,96,11],[130,10,96,13,"success"],[130,17,96,20],[130,19,96,22],[130,24,96,27],[131,10,96,29,"error"],[131,15,96,34],[131,17,96,36,"error"],[131,22,96,41],[131,23,96,42,"message"],[131,30,96,49],[131,34,96,53],[132,8,96,69],[132,9,96,70],[133,6,97,2],[134,4,98,0],[134,5,98,1],[135,4,98,1],[135,11,98,1,"_signIn"],[135,18,98,1],[135,19,98,1,"apply"],[135,24,98,1],[135,31,98,1,"arguments"],[135,40,98,1],[136,2,98,1],[137,2,98,1],[137,11,103,22,"signOut"],[137,18,103,29,"signOut"],[137,19,103,29],[138,4,103,29],[138,11,103,29,"_signOut"],[138,19,103,29],[138,20,103,29,"apply"],[138,25,103,29],[138,32,103,29,"arguments"],[138,41,103,29],[139,2,103,29],[140,2,107,0],[141,0,108,0],[142,0,109,0],[143,2,107,0],[143,11,107,0,"_signOut"],[143,20,107,0],[144,4,107,0,"_signOut"],[144,12,107,0],[144,19,107,0,"_asyncToGenerator"],[144,36,107,0],[144,37,107,0,"default"],[144,44,107,0],[144,46,103,7],[144,59,103,47],[145,6,104,2],[145,12,104,8,"supabase"],[145,27,104,16],[145,28,104,16,"supabase"],[145,36,104,16],[145,37,104,17,"auth"],[145,41,104,21],[145,42,104,22,"signOut"],[145,49,104,29],[145,50,104,30],[145,51,104,31],[146,4,105,0],[146,5,105,1],[147,4,105,1],[147,11,105,1,"_signOut"],[147,19,105,1],[147,20,105,1,"apply"],[147,25,105,1],[147,32,105,1,"arguments"],[147,41,105,1],[148,2,105,1],[149,2,105,1],[149,11,110,22,"getSession"],[149,21,110,32,"getSession"],[149,22,110,32],[150,4,110,32],[150,11,110,32,"_getSession"],[150,22,110,32],[150,23,110,32,"apply"],[150,28,110,32],[150,35,110,32,"arguments"],[150,44,110,32],[151,2,110,32],[152,2,127,0],[153,0,128,0],[154,0,129,0],[155,2,127,0],[155,11,127,0,"_getSession"],[155,23,127,0],[156,4,127,0,"_getSession"],[156,15,127,0],[156,22,127,0,"_asyncToGenerator"],[156,39,127,0],[156,40,127,0,"default"],[156,47,127,0],[156,49,110,7],[156,62,110,57],[157,6,111,2],[157,10,111,6],[158,8,112,4],[158,12,112,4,"_yield$supabase$auth$3"],[158,34,112,4],[158,43,112,40,"supabase"],[158,58,112,48],[158,59,112,48,"supabase"],[158,67,112,48],[158,68,112,49,"auth"],[158,72,112,53],[158,73,112,54,"getSession"],[158,83,112,64],[158,84,112,65],[158,85,112,66],[159,10,112,20,"session"],[159,17,112,27],[159,20,112,27,"_yield$supabase$auth$3"],[159,42,112,27],[159,43,112,12,"data"],[159,47,112,16],[159,48,112,20,"session"],[159,55,112,27],[160,8,114,4],[160,12,114,8,"session"],[160,19,114,15],[160,21,114,17,"user"],[160,25,114,21],[160,27,114,23],[161,10,115,6],[161,17,115,13],[162,12,116,8,"id"],[162,14,116,10],[162,16,116,12,"session"],[162,23,116,19],[162,24,116,20,"user"],[162,28,116,24],[162,29,116,25,"id"],[162,31,116,27],[163,12,117,8,"email"],[163,17,117,13],[163,19,117,15,"session"],[163,26,117,22],[163,27,117,23,"user"],[163,31,117,27],[163,32,117,28,"email"],[163,37,117,33],[163,41,117,37],[164,10,118,6],[164,11,118,7],[165,8,119,4],[166,8,121,4],[166,15,121,11],[166,19,121,15],[167,6,122,2],[167,7,122,3],[167,8,122,4],[167,15,122,11,"error"],[167,20,122,16],[167,22,122,18],[168,8,123,4],[168,15,123,11],[168,19,123,15],[169,6,124,2],[170,4,125,0],[170,5,125,1],[171,4,125,1],[171,11,125,1,"_getSession"],[171,22,125,1],[171,23,125,1,"apply"],[171,28,125,1],[171,35,125,1,"arguments"],[171,44,125,1],[172,2,125,1],[173,2,130,7],[173,11,130,16,"onAuthStateChange"],[173,28,130,33,"onAuthStateChange"],[173,29,130,34,"callback"],[173,37,130,71],[173,39,130,73],[174,4,131,2],[174,11,131,9,"supabase"],[174,26,131,17],[174,27,131,17,"supabase"],[174,35,131,17],[174,36,131,18,"auth"],[174,40,131,22],[174,41,131,23,"onAuthStateChange"],[174,58,131,40],[174,59,131,41],[174,60,131,42,"event"],[174,65,131,47],[174,67,131,49,"session"],[174,74,131,56],[174,79,131,61],[175,6,132,4],[175,10,132,8,"session"],[175,17,132,15],[175,19,132,17,"user"],[175,23,132,21],[175,25,132,23],[176,8,133,6,"callback"],[176,16,133,14],[176,17,133,15],[177,10,134,8,"id"],[177,12,134,10],[177,14,134,12,"session"],[177,21,134,19],[177,22,134,20,"user"],[177,26,134,24],[177,27,134,25,"id"],[177,29,134,27],[178,10,135,8,"email"],[178,15,135,13],[178,17,135,15,"session"],[178,24,135,22],[178,25,135,23,"user"],[178,29,135,27],[178,30,135,28,"email"],[178,35,135,33],[178,39,135,37],[179,8,136,6],[179,9,136,7],[179,10,136,8],[180,6,137,4],[180,7,137,5],[180,13,137,11],[181,8,138,6,"callback"],[181,16,138,14],[181,17,138,15],[181,21,138,19],[181,22,138,20],[182,6,139,4],[183,4,140,2],[183,5,140,3],[183,6,140,4],[184,2,141,0],[185,0,141,1],[185,3]],"functionMap":{"names":["<global>","signUp","signIn","signOut","getSession","onAuthStateChange","supabase.auth.onAuthStateChange$argument_0"],"mappings":"AAA;OCgB;CD4C;OEK;CFgC;OGK;CHE;OIK;CJe;OKK;yCCC;GDS;CLC"},"hasCjsExports":false},"type":"js/module"}]}